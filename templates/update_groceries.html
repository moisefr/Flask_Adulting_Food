{% extends 'layout.html' %}
{% block body %} 
{% from "includes/_formhelpers.html" import render_field %}

<form method="POST"  enctype="multipart/form-data" action="">
        <div class="form-group">
            {{render_field(form.title, class_="form-control")}}
        </div>
        <!-- Showing Ingredients that were selected already -->
        <div class="form-group">
            {% for type in types %}
                <button class="accordion">{{type}}</button>
                        <div class="panel"> 
                            {% for ingredient in form.ingredients %}
                                {% if type == ingredient.type %}
                                <!-- <button class="no_ingredient"> <p>{{ingredient.title}} - {{ingredient._id}}</p></button> -->
                                <!-- <p class="no_ingredient"><p class="ingredient._id">{{ingredient.title}} - {{ingredient._id}}</p></p> -->
                                    <ul >
                                            <li><input type="checkbox" name = "{{ingredient}}" value = "{{ingredient}}" id="{{ingredient._id}}" checked/><label for="{{ingredient._id}}"><a href="ingredient/{{ingredient._id}}">{{ingredient.title}}</a></label>
                                                <div class="image-area"><img src={{ url_for('static', filename=ingredient.img_URI) }} alt=”Bananas width="100" height="100"></div>
                                            </li>
                                    </ul>
                                {% endif %}
                            {% endfor %}
                            </div>
                        {% endfor %}
        </div>
        <div><h2>Add More Ingredients</h2></div>
        <div class="container">
            <div class="col">
                <div class="form-group">
                    <div class = "container2">
                        {% for recipe in recipes%}
                                <div class=column>
                                    <div class="options-area"><input type="checkbox" name = "{{recipe._id}}" id = "{{recipe._id}}" value="{{recipe._id}}"/></div>
                                    <label for={{recipe._id}}>{{recipe._id}}</label><br>
                                    <h4>{{recipe.title}}</h2>
                                    <div class="image-area"><img src={{ url_for('static', filename=recipe.img_URI) }} alt=”Bananas width="100" height="100"></div>
                                    <div class="description-area"><p>{{recipe.description}}</p></div>
                                    <ul>
                                        {%for items in recipe.ingredients%}
                                            <li>{{items.title}}</li>
                                        {%endfor%}
                                    </ul>
                                </div>
                        {% endfor %}
                    </div>
                </div> 
            </div>
            <div class="col">
                <div class="container2">
                    {% for ingredient in ingredients%}
                    <ol>
                        <li><input type="checkbox" name = "{{ingredient}}" value = "{{ingredient}}" id="{{ingredient._id}}"/><label for="{{ingredient._id}}"><a href="ingredient/{{ingredient._id}}">{{ingredient.title}}</a></label>
                            <div class="image-area"><img src={{ url_for('static', filename=ingredient.img_URI) }} alt=”Bananas width="100" height="100"></div>
                        </li>
                    </ol>
                {% endfor %}
                </div>
            </div>
        <div>
        <input type="submit" class="btn btn-primary" value="Submit"></p></div>
</form>
<style>
            /* Style the buttons that are used to open and close the accordion panel */
        .accordion {
        background-color: #eee;
        color: #444;
        cursor: pointer;
        padding: 18px;
        width: 100%;
        text-align: left;
        border: none;
        outline: none;
        transition: 0.4s;
        }

        /* Add a background color to the button if it is clicked on (add the .active class with JS), and when you move the mouse over it (hover) */
        .active, .accordion:hover {
        background-color: #ccc;
        }

        /* Style the accordion panel. Note: hidden by default */
        .panel {
        padding: 0 18px;
        background-color: white;
        display: none;
        overflow: hidden;
        }
        .container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: 1fr;
            gap: 0px 0px;
            grid-auto-flow: row;
            grid-template-areas:
                ". . ";
            }
        .container2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: 1fr 1fr 1fr;
            gap: 0px 0px;
            grid-auto-flow: row;
            grid-template-areas:
                ". ."
                ". ."
                ". .";
        }         


</style>
<script>
    var acc = document.getElementsByClassName("accordion");
    var i;
    var non = document.getElementsByClassName("panel");

    for (i = 0; i < acc.length; i++) {
    acc[i].addEventListener("click", function() {
        /* Toggle between adding and removing the "active" class,
        to highlight the button that controls the panel */
        this.classList.toggle("active");

        /* Toggle between hiding and showing the active panel */
        var panel = this.nextElementSibling;
        panel.onclick(window.onlostpointercapture)
        if (panel.style.display === "block") {
        panel.style.display = "none";
        } else {
        panel.style.display = "block";
        }
    });
    }
    
</script>
{% endblock %}